<app-general-modal-template modalTitle="Attach Groups" [modalRef]="bsModalRef">
  <div class="mb-2 mt-2 col-md-4">
    <app-filter-text-input
      (onChange)="filterUserGroups($event)"
      placeholder="Search"
    ></app-filter-text-input>
  </div>

  <p-table
    [totalRecords]="totalUserGroupsCount"
    [value]="userGroups"
    [rows]="15"
    sortMode="single"
    [sortField]="'name'"
    (onLazyLoad)="this.lazyLoadUserGroups($event)"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="w-10"></th>
        <th
          [pSortableColumn]="'name'"
          class="w-40 font-weight-normal font-roboto"
        >
          Groups
          <p-sortIcon [field]="'name'"></p-sortIcon>
        </th>
        <th class="w-40 font-weight-normal font-roboto">
          Description
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-userGroup>
      <tr>
        <td rowspan="1">
          <app-checkbox
            (onChange)="userGroupSubject.next([$event, userGroup])"
          ></app-checkbox>
        </td>
        <td>{{ userGroup.name }}</td>
        <td class="text-break">{{ userGroup.description }}</td>
      </tr>
    </ng-template>
  </p-table>
  <div class="btn-container w-100 d-flex justify-content-end mt-3">
    <button class="kh-btn" (click)="bsModalRef.hide()">Cancel</button>
    <button
      class="kh-btn kh-btn-blue"
      [disabled]="!newUserGroupsCollectionLength"
      (click)="saveGroups()"
    >
      Save
    </button>
  </div>
</app-general-modal-template>

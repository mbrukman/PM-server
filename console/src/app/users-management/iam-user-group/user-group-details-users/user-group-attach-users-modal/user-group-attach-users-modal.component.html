<app-general-modal-template modalTitle="Attach Users" [modalRef]="bsModalRef">
  <div class="row mb-2 mt-2">
    <app-filter-text-input
      (onChange)="filterUsers($event)"
      placeholder="Search"
    ></app-filter-text-input>
  </div>

  <p-table
    [totalRecords]="totalUsersCount"
    [value]="users"
    [rows]="15"
    sortMode="single"
    [sortField]="'name'"
    (onLazyLoad)="this.lazyLoadUsers($event)"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="w-10"></th>
        <th [pSortableColumn]="'name'" class="w-90 font-weight-normal">
          Users
          <p-sortIcon [field]="'name'"></p-sortIcon>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td rowspan="1">
          <app-checkbox
            (onChange)="userSubject.next([$event, user])"
          ></app-checkbox>
        </td>
        <td colspan="4">{{ user.name }}</td>
      </tr>
    </ng-template>
  </p-table>
  <div class="btn-container w-100 d-flex justify-content-end mt-3">
    <button class="kh-btn kh-btn-gray" (click)="bsModalRef.hide()">
      Cancel
    </button>
    <button
      class="kh-btn kh-btn-blue"
      [disabled]="!newUsersCollectionLength"
      (click)="saveGroups()"
    >
      Save
    </button>
  </div>
</app-general-modal-template>

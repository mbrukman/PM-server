<div>
  <div class="row pt-5 pb-5 d-flex justify-content-between text-white">
    <a class="kh-btn kh-btn-blue" (click)="openAttachUsersModal()">Attach Users</a>
    <app-filter-text-input
      (onChange)="this.userFilterSubject.next($event)"
    ></app-filter-text-input>
  </div>
  <p-table
    *ngIf="userGroup$ | async as userGroup"
    rows="15"
    [paginator]="true"
    [value]="userGroup.users"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Users</th>
        <th>Groups</th>
        <th>Detach</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>

      <ng-template #tooltip>
        <ul *ngIf="user.groups.length">
          <li *ngFor="let userGroup of user.groups">
            <a href="" routerLink="/user-groups/{{userGroup._id}}">
              {{userGroup.name}}
            </a>
          </li>
        </ul>
      </ng-template>

      <tr>
        <td colspan="1">{{user.name}}</td>
        <td rowspan="1">
          <a class="group-size"
             [tooltip]="tooltip"
             triggers="click">
            {{user.groups.length}}
          </a>
        </td>
        <td rowspan="1">
          <button class="btn btn-link" (click)="detachUserSubject.next(user)">
            <i class="fa fa-minus-circle" aria-hidden="true"></i>
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>

</div>

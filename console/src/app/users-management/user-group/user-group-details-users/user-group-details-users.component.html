<div>
  <div class="row pt-5 pb-5 d-flex justify-content-between text-white">
    <a class="kh-btn kh-btn-blue" (click)="openAttachUsersModal()">Attach Users</a>
    <app-filter-text-input
      (onChange)="this.userFilterSubject.next($event)"
    ></app-filter-text-input>
  </div>
  <p-table
    *ngIf="userGroup$ | async as userGroup"
    [sortMode]="'multiple'"
    [value]="userGroup.users"
  >
    <ng-template pTemplate="header">
      <tr>
        <th [pSortableColumn]="'name'">
          Users
          <p-sortIcon field="name"></p-sortIcon>
        </th>
        <th [pSortableColumn]="'groups.length'">
          Groups
          <p-sortIcon field="groups.length"></p-sortIcon>
        </th>
        <th>Detach</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>

      <ng-template #tooltip>
        <ul class="tooltip-list pl-2 pr-2" *ngIf="user.groups.length">
          <li *ngFor="let userGroup of user.groups" class="pb-1 pt-1">
            <a href="" routerLink="/admin/users-management/groups/{{userGroup._id}}">
              {{userGroup.name}}
            </a>
          </li>
        </ul>
      </ng-template>

      <tr>
        <td colspan="1">{{user.name}}</td>
        <td rowspan="1">
          <a class="group-size"
             [tooltip]="tooltip"
             placement="right"
             triggers="click">
            {{user.groups.length}}
          </a>
        </td>
        <td rowspan="1">
          <button class="btn btn-link text-white" (click)="openDetachConfirmationModal(user)">
            <svg version="1.1" id="Detach" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                 x="0px" y="0px"
                 stroke="white"
                 width="20" height="20"
                 viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve">
              <g>
	              <g>
	              	<path

                    d="M9.7,3.8l2.5,2.5L10.5,8l1.2,1.2l2-2h0.4c0.5,0,1.1-0.2,1.5-0.6c0.3-0.3,0.4-0.6,0.4-1c0-0.4-0.2-0.7-0.4-0.9l-4.2-4.2
			c-0.3-0.3-0.6-0.4-1-0.4C10,0,9.7,0.2,9.5,0.4c-0.4,0.4-0.6,1-0.6,1.5l0,0.4l-2,2L8,5.5L9.7,3.8z M10.4,1.4l4.1,4.1l-0.7,0.3
			l-3.8-3.8L10.4,1.4z"/>
	              </g>
                <g>
		              <path d="M9.4,11.1l0.1,2.2c0,0,0,0.1,0,0.1L2.6,6.5c0,0,0.1,0,0.1,0l2.2,0.1L3.2,4.8l-0.3,0c0,0-0.1,0-0.1,0c-0.3,0-0.7,0.1-1,0.3
			L0.2,6.5l3.9,3.9l-3,3L0,16l2.6-1.1l3-3l3.9,3.9l1.1-1.1l0.3-0.4c0.2-0.4,0.3-0.8,0.3-1.1l0-0.3L9.4,11.1z"/>
                </g>
                <g>
	            	  <rect x="7.3" y="-2.2" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -3.0827 8.0957)" width="1.9" height="20"/>
	              </g>
              </g>
            </svg>
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>

</div>
